import React from "react";
import { useTranslation } from "react-i18next";
import {
  HeaderWrapper,
  LanguageOption,
  LanguageSwitcherWrapper,
  LogoContainer,
  LogoText,
  Title,
} from "./Header.styled";

const base64svg =
  "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA1MiA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI0LjAwNDIgMjkuNDA1N0MyMi45NzQ0IDI1Ljk5NDEgMjMuNjc3NiAyMy4yMjM5IDIzLjY3NzYgMjMuMjIzOUwxNC4yOTYxIDEwLjY2NDJDNy44MDIzMSA5LjE4ODE3IDguMjg5NTUgMTYuNTUwMyA4LjI4OTU1IDE2LjU1MDNMMjQuMDkzNCAzNy42MjY1QzI0LjA5MzQgMzcuNjI2NSAyNi4xNjgyIDQwLjE1MjcgMjkuMDcwMiAzOC45MTI4QzI5LjkwODEgMzguNTU2NSAzMC40MzI5IDM4LjA3NzMgMzAuNzU1OSAzNy41NzY3QzI2LjY3NTEgMzQuNjUxNCAyNC41ODk2IDMxLjM0MTQgMjQuMDA0MiAyOS40MDMxIiBmaWxsPSIjRDdEN0Q3IiBmaWxsLW9wYWNpdHk9IjAuNyIvPgo8cGF0aCBkPSJNMTQuMzQ0IDEwLjcyODVMNy41MjE4IDEuNjI3NjNDNy41MjE4IDEuNjI3NjMgNS44MTI5MSAtMC42MjQyMSAyLjk4OTQ0IDAuMTY5NDU3QzEuMTcyNTggMC42ODA3NTMgMCAyLjI0NzYgMCA0LjE0ODQ4VjM1LjM0MDJDMCAzNy43OTA3IDEuNzE1MTQgMzkuNTAyNyA0LjE3MDk1IDM5LjUwMjdDNi42MjY3NSAzOS41MDI3IDguMzQxIDM3Ljc5MDcgOC4zNDEgMzUuMzQwMlYxNi42NTY1QzguMzQxIDEyLjM0NyAxMC41OTYgOS44NTAyMyAxNC4zNDQgMTAuNzMxMiIgZmlsbD0iI0YzRjNGMyIvPgo8cGF0aCBkPSJNNDEuNjY1MiA2LjMwNTdDNDAuNDIzOSA0LjA2NzIyIDM5LjUyMTcgMC4xMTY2OTcgMzMuMTc1MSAwLjExNjY5N0wyNy4xMTY4IDAuMTEyMjQ0QzIzLjAxNjQgMC4xMTIyNDQgMjIuOTcyNyAzLjgwMTc3IDIyLjk3MjcgNC4yMjkzNEMyMi45NzI3IDQuMjM1NTcgMjIuOTcyNyA0LjI0MTgxIDIyLjk3MjcgNC4yNDg5M0MyMi45NzI3IDQuMjU2MDYgMjQuNjY4MiAxMC40NTY2IDMxLjI2MTkgMTAuNDQ1MUMzMS4xNjY0IDkuMzQzMTkgMzEuNjkyOSA4LjQ1MTU0IDMyLjg3NjIgOC4zODY1MUg0NS4xOTA5QzQ1LjExMDYgOC4zODY1MSA0Mi44ODY4IDguMTk5NDUgNDEuNjY5NiA2LjMwNTciIGZpbGw9IiNEN0Q3RDciIGZpbGwtb3BhY2l0eT0iMC43Ii8+CjxwYXRoIGQ9Ik00My4yMjY2IDE5Ljk0MTRDNDEuNjUzNCAxOS4wOTQzIDM5LjU5MjkgMTguNjQxOCAzNy43NTU1IDE4LjY0MThDMzguNTk2OSAxOC43NDA4IDM5LjQxOTMgMTguOTYyNiA0MC4xOTYxIDE5LjMwMDFDNDIuMzEyOCAyMC4yMTkzIDQzLjY3NjQgMjIuNTEzIDQzLjY3NjQgMjQuOTUxOUM0My42NzQ3IDI2LjU5NDcgNDMuMDIwMiAyOC4xNjk4IDQxLjg1NjUgMjkuMzMxNEM0MC42OTI3IDMwLjQ5MzEgMzkuMTE0OCAzMS4xNDY0IDM3LjQ2OTEgMzEuMTQ4MUMzMy45ODg4IDMxLjE0ODEgMzEuMjYxNyAyOC41MDQzIDMxLjI2MTcgMjUuMDMwM0MzMS4yNjE3IDI1LjUzMTggMzEuMjI2IDI2LjAxNDYgMzEuMjU2NCAyNi40ODg1QzMxLjUzOTIgMzUuNDU0OSAzNy40MzE2IDM5LjM5NjUgMzcuNDY3MyAzOS40MjE0QzQwLjM4MjYgMzkuNDE4MSA0My4yMjkzIDM4LjUzODggNDUuNjM3IDM2Ljg5OEM0OC4wNDQ2IDM1LjI1NzEgNDkuOTAxNiAzMi45MzA3IDUwLjk2NjIgMzAuMjIxN0M1MC45NjYyIDMwLjIyMTcgNDkuMzczMyAyMy4wNTczIDQzLjIyNjYgMTkuOTQxNFoiIGZpbGw9IiNEN0Q3RDciIGZpbGwtb3BhY2l0eT0iMC43Ii8+CjxwYXRoIGQ9Ik0zMS4yNjE5IDI1LjAyODZDMzEuMjYxOSAyMy40MDY1IDI5Ljg4ODUgMjEuMDg3OCAyNy4xMTc3IDIxLjA4NzhDMjQuNjc3MSAyMS4wODc4IDIyLjk3MjcgMjIuNTkyMyAyMi45NzI3IDI1LjAyODZDMjIuOTcyNyAzMy4wMDggMjkuNDc2MyAzOS40MjE0IDM3LjQ2OTIgMzkuNDIxNEMzNy40NjkyIDM5LjQyMTQgMzEuMjYxOSAzNS4xMiAzMS4yNjE5IDI1LjAyODZaIiBmaWxsPSIjRjNGM0YzIi8+CjxwYXRoIGQ9Ik00NS4xODc4IDAuMTEyMjQ0SDMyLjg3M0MzMi45NzU3IDAuMTEyMjQ0IDMzLjA3MzggMC4xMTIyNDQgMzMuMTczOCAwLjExNjY5N0MzOC40Mzg4IDAuMjEyMDA5IDM5Ljc2MyAyLjgwMjM0IDQwLjkyNTggNS4wNTk1MkM0MS4xNDk4IDUuNDk1MSA0MS4zNzIgNS45MTY0MyA0MS42MDc2IDYuMzA2NTlDNDIuMjc2IDcuMzkzMzEgNDMuMjEzOSA4LjM4NjUxIDQ1LjE4NDIgOC4zODY1MUM0Ny45MjgzIDguMzg2NTEgNDkuMzI4NCA1LjkxNDY1IDQ5LjMyODQgNC4yNTA3MUM0OS4zMjg0IDEuODM2NzUgNDcuMzAxOCAwLjExNDAyNSA0NS4xODQyIDAuMTE0MDI1IiBmaWxsPSIjRjNGM0YzIi8+CjxwYXRoIGQ9Ik0zNy40NjkyIDEwLjM2MzFIMzEuMjYxOUMyNC44NjcyIDEwLjM2MzEgMjIuOTcyNyA0LjE2NjkzIDIyLjk3MjcgNC4xNjY5M1YxMy42Nzc2QzIyLjk3MjcgMTYuOTY2MyAyNi4zMzQyIDE4LjYzODIgMzEuMjAzOSAxOC42MzgySDM3LjQ2OTJDNDcuOTI1MiAxOC42MzgyIDUwLjk2NzMgMzAuMjE4MSA1MC45NjczIDMwLjIxODFDNTUuMTQ4OSAxOC43ODM0IDQ1LjgyNTQgMTAuMzYzMSAzNy40NjkyIDEwLjM2MzFaIiBmaWxsPSIjRjNGM0YzIi8+Cjwvc3ZnPgo=";

const Header = () => {
  const { t, i18n } = useTranslation();

  const handleLanguageChange = (lang: "es" | "en") => {
    if (i18n.language === lang) return;

    i18n.changeLanguage(lang);

    const event = new CustomEvent("languageChange", { detail: { lang } });
    window.dispatchEvent(event);
  };

  return (
    <HeaderWrapper>
      <LogoContainer>
        <img src={base64svg} alt="Logo" />
        <LogoText>Challenge</LogoText>
      </LogoContainer>
      <LanguageSwitcherWrapper>
        <LanguageOption
          isActive={i18n.language === "es"}
          onClick={() => handleLanguageChange("es")}
        >
          ES
        </LanguageOption>
        <LanguageOption
          isActive={i18n.language === "en"}
          onClick={() => handleLanguageChange("en")}
        >
          EN
        </LanguageOption>
      </LanguageSwitcherWrapper>
    </HeaderWrapper>
  );
};

export default Header;
